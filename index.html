<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Radio Trabull Network</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      background: #222;
      color: #fff;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
    }
    .radio-box {
      background: #111;
      border-radius: 14px;
      box-shadow: 0 2px 18px #0008;
      padding: 24px 28px 20px 28px;
      text-align: center;
      width: 330px;
      max-width: 96vw;
    }
    .radio-box img {
      width: 80px;
      border-radius: 50%;
      margin-bottom: 14px;
    }
    .dj-label {
      font-size: 16px;
      margin: 8px 0 2px 0;
    }
    .dj-label span {
      color: #6cf;
      font-weight: bold;
    }
    .status {
      font-size: 13px;
      color: #bbb;
      margin-bottom: 10px;
    }
    audio {
      width: 100%;
      margin: 10px 0 6px 0;
      outline: none;
    }
    .controls button {
      background: #6cf;
      color: #111;
      border: none;
      border-radius: 5px;
      font-size: 18px;
      margin: 0 4px;
      padding: 7px 14px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .controls button:hover {
      background: #53cfff;
    }
    @media (max-width: 480px) {
      .radio-box { padding: 12px 5vw; width: 98vw; }
      .radio-box img { width: 60px; }
    }
  </style>
</head>
<body>
  <div class="radio-box">
    <img src="https://cdn-icons-png.flaticon.com/512/727/727240.png" alt="Radio Logo">
    <div class="dj-label">DJ: <span id="djName">Cargando...</span></div>
    <div class="status" id="status">Conectando a la radio...</div>
    <audio id="radioPlayer" src="https://radio.kusmedios.lat/listen/estacionkusfm/radio.mp3" controls preload="none"></audio>
    <div class="controls">
      <button onclick="document.getElementById('radioPlayer').play()">‚ñ∂Ô∏è</button>
      <button onclick="document.getElementById('radioPlayer').pause()">‚è∏Ô∏è</button>
      <button onclick="toggleMute()">üîá/üîä</button>
    </div>
  </div>

  <script>
    // Cambia aqu√≠ si el mountpoint cambia
    const azuraApi = "https://radio.trabullnetwork.pro/api/station/estacionkusfm/nowplaying";

    async function updateDJ() {
      try {
        const r = await fetch(azuraApi);
        if (!r.ok) throw new Error("Sin respuesta");
        const data = await r.json();
        if (data.live && data.live.is_live && data.live.streamer_name)
          document.getElementById('djName').textContent = data.live.streamer_name;
        else
          document.getElementById('djName').textContent = "estacionkusfm";
        document.getElementById('status').textContent = "Radio en vivo";
      } catch {
        document.getElementById('djName').textContent = "estacionkusfm";
        document.getElementById('status').textContent = "No se pudo conectar üòî";
      }
    }
    updateDJ();
    setInterval(updateDJ, 10000); // Actualiza cada 10 segundos

    // Bot√≥n mute/unmute
    function toggleMute() {
      const player = document.getElementById('radioPlayer');
      player.muted = !player.muted;
    }
  </script>
</body>
</html>